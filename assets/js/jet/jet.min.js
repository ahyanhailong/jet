(function(){
  /*define*/function _define(a,b,c){c._func||(c._func=[]);for(var d in b)_defineCom(a,d,b,c)}function _defineArray(a,b,c){_defineArrayFormIndex(a,b,c)}function _defineArrayFormIndex(a,b,c,d){c._func||(c._func=[]);for(var e=d||0;e<b.length;e++)_defineCom(a,e,b,c)}function _defineCom(a,b,c,d){var f,e=_JT.type(c[b]);"json"==e?(f={},d[b]||(d[b]={}),_defineBase(a,c,b,f,d[b]),_define(f,c[b],d[b])):"array"==e?(f=[],d[b]||(d[b]=[]),_defineBase(a,c,b,f,d[b]),_defineArray(f,c[b],d[b])):(d[b]&&d[b]._func||(d[b]={_func:[]}),defineFinal(a,c,b,d[b]))}function _defineBase(a,b,c,d,e){Object.defineProperty(a,c,{configurable:!0,get:function(){return d},set:function(a){b[c]=a,_copyValue(d,a,e),e._func._JT_each(function(b){b(c,a)})}})}function defineFinal(a,b,c,d){Object.defineProperty(a,c,{configurable:!0,get:function(){return b[c]},set:function(a){b[c]=a,d._func._JT_each(function(b){b(c,a)})}})}function _copyValue(a,b,c){"json"==_checkType(a,b)?_copyValueJson(a,b,c):_copyValueArr(a,b,c)}function _copyValueJson(a,b,c){for(var d in b)_copyCom(a,b,d,c)}function _copyValueArr(a,b,c){for(var d=0;d<b.length;d++)_copyCom(a,b,d,c)}function _copyCom(a,b,c,d){if(a[c]){var e=_JT.type(a[c]);"json"==e?_copyValueJson(a[c],b[c],d[c]):"array"==e?_copyValueArr(a[c],b[c],d[c]):a[c]=b[c]}else _defineCom(a,c,b,d)}function _checkType(a,b){var c=_JT.type(a),d=_JT.type(b);return c!=d&&_throw("不允许前后设置的值类型不一致"),c};
  /*Jet*/function _throw(a){throw new Error(a)}function _log(a){console.log(a)}function _initJet(a,b){var d,e,f,g,h,i,c=this;a.ele?(d=a.ele._JT_findAttr("\\"+_bind),e=a.ele._JT_findAttr("\\"+_if),f=a.ele._JT_findAttr("\\"+_on),g=a.ele._JT_findAttr("\\"+_run)):(d=_JT.attr("\\"+_bind),e=_JT.attr("\\"+_if),f=_JT.attr("\\"+_on),g=_JT.attr("\\"+_run)),h=[],i=document.createDocumentFragment(),d._JT_each(function(a){h.push({par:a._JT_parent(),index:a._JT_index(),item:a})}),d._JT_each(function(d){var f,g,h,j;if(!d._hasBind)if(i.appendChild(d),f=d._JT_attr(_bind),a.data[f]){switch(g=_JT.type(a.data[f]),h=_jetOpt(c,d,f,b[f]),g){case"json":j=new Jet.Bind(h);break;case"array":j=new Jet.For(h);break;default:j=isInput(d)?new Jet.Input(h):new Jet.Text(h)}d.__isRoot=!0,c._tools._jets.push(j)}else _throw("原数据没有"+f+"属性")}),e._JT_each(function(a){a._hasIf||c._tools._jetTools.push(new Jet.If(_jetOpt(c,a)))}),f._JT_each(function(a){a._hasOn||c._tools._jetTools.push(new Jet.On(_jetOpt(c,a)))}),g._JT_each(function(a){a._hasRun||c._tools._jetTools.push(new Jet.Run(_jetOpt(c,a)))}),h._JT_each(function(a){1==a.item.__isRoot&&a.par._JT_append(a.item,a.index)}),Jet.load.init(),Jet.valid.init()}function _jetOpt(a,b,c,d){return{jet:a,par:a,ele:b,data:a,_data:a._tools._data,name:c,calls:d||a._tools.calls}}function isInput(a){var b=a.tagName;return"INPUT"==b||"TEXTAREA"==b||"SELECT"==b||a._JT_hasAttr("contenteditable")&&"false"!=a.attr("contenteditable")}function _checkJetTools(a){var b=this._tools._jetTools;this.ele._JT_hasAttr(_on)&&(this.ele._hasOn||b.push(new Jet.On(a))),this.ele._JT_hasAttr(_run)&&(this.ele._hasRun||b.push(new Jet.Run(a))),this.ele._JT_hasAttr(_if)&&(this.ele._hasIf||b.push(new Jet.If(a)))}var _bind="$",_for="$for",_input="$input",_text="$text",_if="$if",_on="$on",_run="$run",_each="$each",_value="$value",_index="$index";window.Jet=function(a){if(this._tools={_jets:[],_jetTools:[],_calls:{},_data:a.data},_define(this,a.data,this._tools._calls),a.func)for(var b in a.func)this[b]?_throw("data 不能与 func 有重名属性"):this[b]=a.func[b];_initJet.call(this,a,this._tools._calls),a.ready&&a.ready.call(this)},Jet.prototype.get=function(){return this},Jet.Base=function(a,b){switch(this.jet=a.jet,this.par=a.par,this.ele=a.ele,this._data=a._data,this.data=a.data,this.type=b,this.name=a.name,this.index=a.index,this._tools={_jets:[],_jetTools:[],_calls:a.calls},this.type){case _if:this.ele._hasIf=!0;break;case _on:this.ele._hasOn=!0;break;case _run:this.ele._hasRun=!0;break;default:this.ele._hasBind=!0}},Jet.Base.prototype.regist=function(a,b){2==arguments.length?(this._tools._calls[a]||_throw("没有"+a+"属性"),"function"!=_JT.type(b)&&_throw("call参数必须为函数"),this._tools._calls[a]._func.push(b)):("function"!=_JT.type(a)&&_throw("call参数必须为函数"),this._tools._calls._func.push(a))},Array.prototype.$push=function(a){var b=this._jet,c=b.data[b.name],d=b._data[b.name];d.push(a),_defineCom(c,c.length,d,b._tools._calls),b.refresh.push.call(b)},Array.prototype.$pushArray=function(a){var b=this;a._JT_each(function(a){b.$push(a)})},Array.prototype.$prep=function(a){var b=this._jet,c=b.data[b.name],d=b._data[b.name];d._JT_prepend(a),b._tools._calls._JT_prepend({}),_defineArray(c,d,b._tools._calls),b.refresh.prep.call(b)},Array.prototype.$prepArray=function(a){this.$insertArray(a,0)},Array.prototype.$insert=function(a,b){var c=this._jet,d=c.data[c.name],e=c._data[c.name];e._JT_insert(a,b),c._tools._calls._JT_insert({},b),_defineArrayFormIndex(d,e,c._tools._calls,b),c.refresh.insert.call(c,b)},Array.prototype.$insertArray=function(a,b){var f,c=this._jet,d=c.data[c.name],e=c._data[c.name];e._JT_insertArray(a,b),f=[],a._JT_each(function(){f.push({})}),c._tools._calls._JT_insertArray(f,b),_defineArrayFormIndex(d,e,c._tools._calls,b),c.refresh.insertArray.call(c,a,b)},Array.prototype.$remove=function(a,b){var c,d,e;b=b||1,c=this._jet,d=c.data[c.name],e=c._data[c.name],e.splice(a,b),c._tools._calls.splice(a,b),_defineArrayFormIndex(d,e,c._tools._calls,a),d.length-=b,c.refresh.remove.call(c,a,b)},Jet.$=_JT;
  /*load*/function _loadCompScript(a,b){var d,e,f,g,c=_JT.attr('load-script="'+b+'"');if(c._JT_exist())d=c._JT_html(),c._JT_remove(),_JT.body()._JT_append(_JT.ct("script")._JT_attr({"load-script":b,type:"text/javascript"})._JT_html(d));else{for(c=_JT.ct("script")._JT_attr({"load-script":b,type:"text/javascript"}),d=["//# sourceURL="+b+".js\r\n"],e=a._JT_findTag("script"),f=-1,g=e.length-1;g>=0;g--)if(e[g]._JT_hasAttr("src")){f=g;break}e._JT_each(function(a,b){a._JT_hasAttr("src")?_JT.load(Jet.router.conf.js+a._JT_attr("src"),function(a){d[b+1]=a,b==f&&(c._JT_html(d.join("")),_JT.body()._JT_append(c))}):d[b+1]=a._JT_html(),a._JT_remove()}),-1==f&&(c._JT_html(d.join("")),_JT.body()._JT_append(c))}}function _loadCompStyle(a,b){var c,d,e,f,g;if(!_JT.attr('load-style="'+b+'"')._JT_exist()){for(c=_JT.ct("style")._JT_attr({"load-style":b,type:"text/css"}),_JT.tag("head")._JT_append(c),c._JT_empty(),d=[],e=a._JT_findTag("style"),f=-1,g=e.length-1;g>=0;g--)if(e[g]._JT_hasAttr("src")){f=g;break}e._JT_each(function(a,b){a._JT_hasAttr("src")?_JT.load(Jet.router.conf.css+a._JT_attr("src"),function(a){d[b]=a,b==f&&c._JT_html(d.join(""))}):d[b]=a._JT_html(),a._JT_remove()}),-1==f&&c._JT_html(d.join(""))}}var _load="$load";Jet.load={init:function(){_JT.attr("\\"+_load)._JT_each(function(a){var b=a._JT_attr(_load);_JT.load(Jet.router.conf.html+b,function(c){var d=a._JT_html(c);_loadCompScript(d,b),_loadCompStyle(d,b)})})}};
  /*valid*/var _form="$form",_valid="$valid";Jet.valid={init:function(){_JT.attr("\\"+_valid)._JT_each(function(a){a._JT_attr("jet-valid",a._JT_attr(_valid))}),_JT.initValid()},findValidPar:function(a){for(var b=a._JT_parent();!b._JT_hasAttr(_form)&&null!=b._JT_parent();)b=b._JT_parent();return b}};
  /*router*/function _initConf(a){var c,b=new Function("return "+a)();if("conf"in b&&("history"in b.conf&&(Jet.router.history=b.conf.history),"base"in b.conf&&(Jet.router.base=b.conf.history?b.conf.base:b.conf.base+"/#","trueBase"in b.conf&&b.conf.trueBase)))for(c in Jet.router.conf)Jet.router.conf[c]=b.conf.base+Jet.router.conf[c];for(c in b.router)Jet.router.router[Jet.router.base+c]=b.router[c]}function _checkUrl(a){return"/"==a[a.length-1]&&(a=a.substring(0,a.length-1)),a=a==Jet.router.base?Jet.router.base+"/home":"/"!=a[0]?Jet.router.path+"/"+a:Jet.router.base+a}function _loadScript(a){var b,c,d,e,f;for(_JT.id(_routeScript)._JT_exist()&&_JT.id(_routeScript)._JT_remove(),b=_JT.ct("script")._JT_attr({id:_routeScript,type:"text/javascript"}),c=["//# sourceURL=__dynamic.js\r\n"],d=a._JT_findTag("script"),e=-1,f=d.length-1;f>=0;f--)if(d[f]._JT_hasAttr("src")){e=f;break}d._JT_each(function(a,d){a._JT_hasAttr("src")?_JT.load(Jet.router.conf.js+a._JT_attr("src"),function(a){c[d+1]=a,d==e&&(b._JT_html(c.join("")),_JT.body()._JT_append(b))}):c[d+1]=a._JT_html(),a._JT_remove()}),-1==e&&(b._JT_html(c.join("")),_JT.body()._JT_append(b))}function _loadStyle(a){var c,d,e,f,b=_JT.id(_routeStyle);for(b._JT_exist()||(b=_JT.ct("style")._JT_attr({id:_routeStyle,type:"text/css"}),_JT.tag("head")._JT_append(b)),b._JT_empty(),c=[],d=a._JT_findTag("style"),e=-1,f=d.length-1;f>=0;f--)if(d[f]._JT_hasAttr("src")){e=f;break}d._JT_each(function(a,d){a._JT_hasAttr("src")?_JT.load(Jet.router.conf.css+a._JT_attr("src"),function(a){c[d]=a,d==e&&b._JT_html(c.join(""))}):c[d]=a._JT_html(),a._JT_remove()}),-1==e&&b._JT_html(c.join(""))}var _route="$router",_routeout="$out",_routeScript="$routeScript",_routeStyle="$routeStyle";Jet.router={use:!0,base:"",trueBase:!1,history:!1,path:"/",params:null,router:{},conf:{router:"/assets/router/router.json",html:"/src/html/",js:"/src/js/",css:"/src/css/",image:"/src/image/"},init:function(){_JT.attr("\\"+_route)._JT_each(function(a){a._JT_clk(function(){Jet.router.route(this._JT_attr(_route))})})},reload:function(){Jet.router.use&&(_JT.load(Jet.router.conf.router,function(a){_initConf(a);var b="/home";location.pathname._JT_has("index.html")||(Jet.router.history?location.pathname.length-Jet.router.base.length>1&&(b=location.pathname.substring(Jet.router.base.length)+location.search):location.hash.length>2&&(b=location.pathname+location.hash,b=b.substring(Jet.router.base.length))),Jet.router.route(b)}),Jet.router.init())},route:function(a){var c,d,e,b="";a._JT_has("?")&&(b=a.substring(a.indexOf("?")),a=a.substring(0,a.indexOf("?"))),a=_checkUrl(a),a in Jet.router.router||(a=Jet.router.base+"/404"),Jet.router.path=a,c={},d=a,e=a+b,history.pushState(c,d,e),Jet.router.params=_JT.urlParam(),_JT.load(Jet.router.conf.html+Jet.router.router[a],function(a){var b=_JT.attr("\\"+_routeout)._JT_html(a);_loadScript(b),_loadStyle(b)})}},Jet.router.reload();
  /*bind*/function _initBind(a){var b=this,c=a.data[a.name],d=this.ele._JT_findAttr("\\"+_bind),e=this.ele._JT_findAttr("\\"+_if),f=this.ele._JT_findAttr("\\"+_on),g=this.ele._JT_findAttr("\\"+_run);d._JT_each(function(a){var e,f,g,h;if(!a._hasBind){if(e=a._JT_attr(_bind),e==_value)g=_bindOpt(b,a,b.name,b.par._tools._calls[b.name]),g.data=b.data,g._data=b._data,f=isInput(a)?new Jet.Input(g):new Jet.Text(g);else if(e==_index||e._JT_has("$.$p"))g=_bindOpt(b,a,e,b.par._tools._calls),g.index=b.name,isInput(a)?_throw("input:不允许将index绑定到输入项中"):(e._JT_has("$.$p")&&(g._parIndex=e._JT_has("(")?parseInt(e.substring(e.indexOf("(")+1,e.indexOf(")"))):e.timeOf("$p")),f=new Jet.Text(g));else if(c[e])switch(h=_JT.type(c[e]),g=_bindOpt(b,a,e,b._tools._calls[e]),h){case"json":f=new Jet.Bind(g);break;case"array":f=new Jet.For(g);break;default:f=isInput(a)?new Jet.Input(g):new Jet.Text(g)}else _throw("原数据没有"+e+"属性");b._tools._jets.push(f)}}),e._JT_each(function(a){a._hasIf||b._tools._jetTools.push(new Jet.If(_bindOpt(b,a)))}),f._JT_each(function(a){a._hasOn||b._tools._jetTools.push(new Jet.On(_bindOpt(b,a)))}),g._JT_each(function(a){a._hasRun||b._tools._jetTools.push(new Jet.Run(_bindOpt(b,a)))}),_checkJetTools.call(this,a),this.regist(function(){b.refresh()})}function _bindOpt(a,b,c,d){return{jet:a.jet,par:a,ele:b,data:a.data[a.name],_data:a._data[a.name],name:c,calls:d||a._tools.calls}}Jet.Bind=function(a){Jet.Base.call(this,a,_bind),_initBind.call(this,a)},function(){var a=function(){};a.prototype=Jet.Base.prototype,Jet.Bind.prototype=new a}(),Jet.Bind.prototype.refresh=function(a){this._tools._jets._JT_each(function(b){b.refresh(a)}),this._tools._jetTools._JT_each(function(b){b.refresh(a)})},Jet.Bind.prototype.get=function(){return this.data[this.name]};
  /*for*/function _refreshIndex(a){for(var b=a;b<this._tools._jets.length;b++)this._tools._jets[b]._tools._jets._JT_each(function(a){a.name==_index?a.setIndex(b):a.type==_for&&a.refreshParIndex()})}function _initForRule(){var b,c,d,e,f,g;if(this.ele._JT_child(0)._JT_attr(_bind)._JT_has("="))for(this._switch=!0,this._html={},this._type=null,b=this,c={},this.ele._JT_child()._JT_each(function(a){var d=a._JT_attr(_bind);null==b._type&&(b._type=d.substring(d.indexOf(".")+1,d.indexOf("="))),d._JT_has("=")||_throw("swicth:html格式有误"),d=d.substring(d.indexOf("=")+1),b._html[d]=a._JT_allHtml(),c[d]=_JT.ct("div")._JT_append(a)}),d=0;d<this.data[this.name].length;d++)e=this.data[this.name][d][this._type],e in this._html?e in c?(this.ele._JT_append(c[e]._JT_child(0)),delete c[e]):this.ele._JT_append(this._html[e]):_throw("swicth:指定属性的值不在swicth枚举内");else if(this.ele._JT_findAttr("\\"+_bind+'="'+_each+'"')._JT_exist())if(1!=this.ele._JT_child().length||this.ele._JT_child(0)._JT_attr(_bind)!=_each)_throw("循环元素绑定格式错误！");else for(f=this.ele._JT_html(),this._html=f,d=0;d<this.data[this.name].length-1;d++)this.ele._JT_append(f);else for(f=this.ele._JT_html(),this._html="<div "+_bind+'="'+_each+'">'+f+"</div>",d=0;d<this.data[this.name].length;d++)g=_JT.ct("div")._JT_attr(_bind,_each),0==d?this.ele._JT_child()._JT_each(function(a){g._JT_append(a)}):g._JT_html(f),this.ele._JT_append(g)}function _initFor(a){var b=this;this.data[this.name]._jet=this,_initForRule.call(this),this.ele._JT_child()._JT_each(function(a,c){var d,e;a._hasBind||(d=_forOpt(b,a,c),e="array"==_JT.type(d.data[0])?new Jet.For(d):new Jet.Bind(d),b._tools._jets.push(e))}),_checkJetTools.call(this,a),this.regist(function(){b.refresh()})}function _forOpt(a,b,c){return{jet:a.jet,par:a,ele:b,data:a.data[a.name],_data:a._data[a.name],name:c,calls:a._tools._calls[c]}}Jet.For=function(a){Jet.Base.call(this,a,_for),_initFor.call(this,a)},function(){var a=function(){};a.prototype=Jet.Base.prototype,Jet.For.prototype=new a}(),Jet.For.prototype.refresh=function(a){a&&a!=this.name||(this._tools._jets._JT_each(function(b){b.refresh(a)}),this._tools._jetTools._JT_each(function(b){b.refresh(a)}))},Jet.For.prototype.get=function(){return this.data[this.name]},Jet.For.prototype.refreshParIndex=function(){this._tools._jets._JT_each(function(a){a._tools._jets._JT_each(function(a){a._parIndex&&a.type==_text?a.refresh():a.type==_for&&a.refreshParIndex()})})},Jet.For.prototype.refresh.push=function(){var a,b;this._switch?(a=this._data[this.name]._JT_last()[this._type],a in this._html?this.ele._JT_append(this._html[a]):_throw("swicth:指定属性的值不在swicth枚举内")):this.ele._JT_append(this._html),b=_forOpt(this,this.ele._JT_child()._JT_last(),this.data[this.name].length-1),"array"==_JT.type(b.data[0])?this._tools._jets.push(new Jet.For(b)):this._tools._jets.push(new Jet.Bind(b))},Jet.For.prototype.refresh.prep=function(){var a,b;this._switch?(a=this._data[this.name]._JT_first()[this._type],a in this._html?this.ele._JT_prepend(this._html[a]):_throw("swicth:指定属性的值不在swicth枚举内")):this.ele._JT_prepend(this._html),b=_forOpt(this,this.ele._JT_child()._JT_first(),0),"array"==_JT.type(b.data[0])?this._tools._jets._JT_prepend(new Jet.For(b)):this._tools._jets._JT_prepend(new Jet.Bind(b)),_refreshIndex.call(this,0)},Jet.For.prototype.refresh.insert=function(a){var b,c;if(this._switch){if(b=this._data[this.name][a][this._type],!(b in this._html))return _throw("swicth:指定属性的值不在swicth枚举内"),void 0;this.ele._JT_append(this._html[b],a)}else this.ele._JT_append(this._html,a);c=_forOpt(this,this.ele._JT_child(a),a),"array"==_JT.type(c.data[0])?this._tools._jets._JT_insert(new Jet.For(c),a):this._tools._jets._JT_insert(new Jet.Bind(c),a),_refreshIndex.call(this,a+1)},Jet.For.prototype.refresh.insertArray=function(a,b){var c=this,d=_JT.type(a[0]);a._JT_each(function(a,e){var g,h,f=b+e;c._switch?(g=c._data[c.name][f][c._type],g in c._html?c.ele._JT_append(c._html[g],f):_throw("swicth:指定属性的值不在swicth枚举内")):c.ele._JT_append(c._html,f),h=_forOpt(c,c.ele._JT_child(f),f),"array"==d?c._tools._jets._JT_insert(new Jet.For(h),f):c._tools._jets._JT_insert(new Jet.Bind(h),f)}),_refreshIndex.call(this,b+a.length)},Jet.For.prototype.refresh.remove=function(a,b){for(var c=0;b>c;c++)this.ele._JT_child(a)._JT_remove();this._tools._jets.splice(a,b),_refreshIndex.call(this,a)};
  /*text*/function _getParIndex(a,b){for(var c=a.par;b>0;)c=c.par.par,b--;return c.ele._JT_index()}function _initText(a){var b=this;""!=this.ele._JT_html().trim()&&(this.func=new Function("$","return "+this.ele._JT_html())),_checkJetTools.call(this,a),this.regist(function(){b.refresh()}),this.refresh()}Jet.Text=function(a){Jet.Base.call(this,a,_text),this._parIndex=a._parIndex,a.par=this,_initText.call(this,a)},function(){var a=function(){};a.prototype=Jet.Base.prototype,Jet.Text.prototype=new a}(),Jet.Text.prototype.refresh=function(a){if(!a||a==this.name){var b=this.func?this.func(this.get()):this.get();this.ele._JT_txt(b)}},Jet.Text.prototype.get=function(){return this._parIndex?_getParIndex(this,this._parIndex):void 0!=this.index?this.index:this.data[this.name]},Jet.Text.prototype.setIndex=function(a){this.index=a,this.refresh(),this._tools._jetTools._JT_each(function(b){b.name==_index&&b.refresh(a)})};
  /*input*/function _initInput(a){var b=this;""!=this.ele._JT_val().trim()&&(this.func=new Function("$","return "+this.ele._JT_val())),this.ele._JT_attr(_bind)==_index&&_throw("输入框不能绑定数组的索引"),_checkJetTools.call(this,a),this.regist(function(){b.refresh()}),this.refresh(),this.isNum="number"==_JT.type(this.get()),this.ele._JT_on("input",function(){var c,a=this._JT_val();b.isNum&&(c=parseFloat(a),a==c.toString()&&(a=c)),b.data[b.name]=a},!0)}Jet.Input=function(a){Jet.Base.call(this,a,_input),a.par=this,_initInput.call(this,a)},function(){var a=function(){};a.prototype=Jet.Base.prototype,Jet.Input.prototype=new a}(),Jet.Input.prototype.refresh=function(a){if(!a||a==this.name){var b=this.func?this.func(this.get()):this.get();this.ele._JT_val(b)}},Jet.Input.prototype.get=function(){return this.data[this.name]};
  /*if*/function _initIf(){var b,c,d,e,a=this;this.regist(function(){a.refresh()}),b=this.ele._JT_attr(_if),c=b.substring(0,b.indexOf(":")),c=c._JT_replaceAll("\\$","d"),this.exp=new Function("d","return ("+c+")"),b=b.substring(b.indexOf(":")+1),d="",e="",b.split(";")._JT_each(function(b){var c,f,g,h,i,j;if(b._JT_has("class["))c=b.substring(b.indexOf("[")+1,b.length-1),c._JT_has("|")?(f=c.split("|")[0].split(",").join(" "),g=c.split("|")[1].split(",").join(" "),d+="$.ele._JT_removeClass('"+g+"')._JT_addClass('"+f+"');",e+="$.ele._JT_removeClass('"+f+"')._JT_addClass('"+g+"');"):(c=c.split(",").join(" "),d+="$.ele._JT_addClass('"+c+"');",e+="$.ele._JT_removeClass('"+c+"');");else if(b._JT_has("attr["))h=b.substring(b.indexOf("[")+1,b.length-1),h._JT_has("|")?(h.split("|")[0].split(",")._JT_each(function(a){var b=a.split("=");1==b.length&&(b[1]=""),d+="$.ele._JT_attr('"+b[0]+"','"+b[1]+"');"}),h.split("|")[1].split(",")._JT_each(function(a){var b=a.split("=");1==b.length&&(b[1]=""),e+="$.ele._JT_attr('"+b[0]+"','"+b[1]+"');"})):h.split(",")._JT_each(function(a){var b=a.split("=");1==b.length&&(b[1]=""),d+="$.ele._JT_attr('"+b[0]+"','"+b[1]+"');",e+="$.ele._JT_removeAttr('"+b[0]+"');"});else if(b._JT_has("text["))i=b.substring(b.indexOf("[")+1,b.length-1),i._JT_has("|")?(d+="$.ele._JT_txt('"+i.split("|")[0]+"');",e+="$.ele._JT_txt('"+i.split("|")[1]+"');"):(d+="$.ele._JT_txt('"+i+"');",e+="$.ele._JT_txt('');");else if(b._JT_has("html["))j=b.substring(b.indexOf("[")+1,b.length-1),j._JT_has("|")?(d+="$.ele._JT_html('"+j.split("|")[0]+"');",e+="$.ele._JT_html('"+j.split("|")[1]+"');"):(d+="$.ele._JT_html('"+j+"');",e+="$.ele._JT_html('');");else if(b._JT_has("css["))h=b.substring(b.indexOf("[")+1,b.length-1),h._JT_has("|")?(d+="$.ele._JT_removeAttr('style');",h.split("|")[0].split(",")._JT_each(function(a){var b=a.split("=");1==b.length&&(b[1]=""),d+="$.ele._JT_css('"+b[0]+"','"+b[1]+"');"}),e+="$.ele._JT_removeAttr('style');",h.split("|")[1].split(",")._JT_each(function(a){var b=a.split("=");1==b.length&&(b[1]=""),e+="$.ele._JT_css('"+b[0]+"','"+b[1]+"');"})):(d+="$.ele._JT_removeAttr('style');",h.split(",")._JT_each(function(a){var b=a.split("=");1==b.length&&(b[1]=""),d+="$.ele._JT_css('"+b[0]+"','"+b[1]+"');"}),e+="$.ele._JT_removeAttr('style');");else if(b._JT_has("|")){if(b=b.split("|"),!(b[0]in a.jet&&b[1]in a.jet))throw new Error("j-if属性值错误");d+="this."+b[0]+".call(this,$);",e+="this."+b[1]+".call(this,$);"}else{if(!(b in a.jet))throw new Error("j-if属性值错误");d+="this."+b+".call(this,$);"}}),this.func_true=new Function("$",d),this.func_false=new Function("$",e),this.refresh()}Jet.If=function(a){this.exp=null,this.func_true=null,this.func_false=null,Jet.Base.call(this,a,_if),_initIf.call(this)},function(){var a=function(){};a.prototype=Jet.Base.prototype,Jet.If.prototype=new a}(),Jet.If.prototype.get=function(){return this.name==_index?this.index:this.name==_value?this.data:this.data[this.name]},Jet.If.prototype.refresh=function(a){var b,c;void 0!=this.index&&void 0!=a&&this.index!=a&&this.index==a,b=this.get(),c={ele:this.ele,data:b,jet:this},this.exp(b)===!0?this.func_true.call(this.jet,c):this.func_false.call(this.jet,c)};
  /*on*/function _initOn(){var c,a=this,b=this.ele._JT_attr(_on);b._JT_has(":")||_throw("j-on 属性格式错误:"+b),c=b.split(":"),c[1]._JT_has(_valid)?c[1]._JT_has("=>")?(a.valid=!0,a.validPar=Jet.valid.findValidPar(a.ele),a.func=a.jet[c[1].substring(c[1].indexOf("=>")+2)]):_throw('valid:"'+c[1]+'" 格式有误，操作符为 =>'):a.func=a.jet[c[1]],a.func&&"function"==_JT.type(a.func)||_throw("没有 "+c[1]+" 方法"),this.ele._JT_on(c[0],function(){var b={ele:this,data:a.get(),e:event,jet:a};a.valid?a.validPar._JT_validate(function(){a.func.call(a.jet,b)}):a.func.call(a.jet,b)})}Jet.On=function(a){Jet.Base.call(this,a,_on),_initOn.call(this)},function(){var a=function(){};a.prototype=Jet.Base.prototype,Jet.On.prototype=new a}(),Jet.On.prototype.get=function(){return void 0!=this.index?this.index:this.data[this.name]},Jet.On.prototype.refresh=function(a){void 0!=this.index&&void 0!=a&&this.index!=a&&(this.index=a)};
  /*run*/function _initRun(){this.runs=this.ele._JT_attr(_run).split(","),this.run()}Jet.Run=function(a){Jet.Base.call(this,a,_run),_initRun.call(this,a)},function(){var a=function(){};a.prototype=Jet.Base.prototype,Jet.Run.prototype=new a}(),Jet.Run.prototype.get=function(){return void 0!=this.index?this.index:this.data[this.name]},Jet.Run.prototype.refresh=function(a){void 0!=this.index&&void 0!=a&&this.index!=a&&this.index==a,this.run()},Jet.Run.prototype.run=function(){var a=this;this.runs._JT_each(function(b){a.jet[b].call(a.jet,{ele:a.ele,data:a.get(),jet:a})})};
})();
